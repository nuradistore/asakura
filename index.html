<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asakura Store - Sistem Otomatis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Load settings from external file -->
    <script src="settings.js" defer></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }
        :root { --primary: #3B82F6; --primary-dark: #1D4ED8; --secondary: #10B981; --danger: #EF4444; --danger-dark: #DC2626; --warning: #F59E0B; --dark: #1F2937; --light: #F9FAFB; --gray: #6B7280; --light-gray: #E5E7EB; --shadow: 0 4px 20px rgba(0,0,0,0.08); }
        body { background: #f8fafc; color: var(--dark); line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        
        header { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; border-bottom: 1px solid var(--light-gray); margin-bottom: 30px; position: relative; }
        .logo { display: flex; align-items: center; gap: 12px; }
        .logo-icon { width: 42px; height: 42px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 20px; }
        .logo-text h1 { font-size: 24px; font-weight: 700; }
        .logo-text span { color: var(--primary); }
        .tagline { font-size: 14px; color: var(--gray); margin-top: 2px; }
        
        .menu-dots { position: relative; }
        .dots-btn { background: none; border: none; font-size: 24px; color: var(--gray); cursor: pointer; padding: 8px 12px; border-radius: 8px; transition: background 0.3s; }
        .dots-btn:hover { background: var(--light-gray); }
        .dropdown-menu { position: absolute; top: 100%; right: 0; background: white; border-radius: 10px; box-shadow: var(--shadow); padding: 10px 0; min-width: 200px; z-index: 1000; display: none; border: 1px solid var(--light-gray); }
        .dropdown-menu.show { display: block; }
        .dropdown-item { display: flex; align-items: center; gap: 12px; padding: 12px 20px; color: var(--dark); text-decoration: none; transition: background 0.3s; }
        .dropdown-item:hover { background: var(--light); }
        .dropdown-item i { color: var(--primary); width: 20px; }
        
        .hero { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 50px; align-items: center; }
        @media (max-width: 768px) { .hero { grid-template-columns: 1fr; } }
        .hero-content h2 { font-size: 14px; color: var(--primary); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; }
        .hero-content h1 { font-size: 36px; font-weight: 800; line-height: 1.2; margin-bottom: 20px; }
        .hero-content h1 span { color: var(--primary); }
        .hero-description { font-size: 18px; color: var(--gray); margin-bottom: 30px; }
        .btn-group { display: flex; gap: 15px; flex-wrap: wrap; }
        .btn { padding: 14px 28px; border-radius: 10px; font-weight: 600; font-size: 16px; cursor: pointer; display: inline-flex; align-items: center; gap: 10px; transition: all 0.3s; border: none; }
        .btn-primary { background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; box-shadow: 0 4px 15px rgba(59,130,246,0.3); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(59,130,246,0.4); }
        .btn-secondary { background: white; color: var(--dark); border: 1px solid var(--light-gray); }
        .btn-secondary:hover { background: var(--light); border-color: var(--primary); color: var(--primary); }
        .btn-danger { background: linear-gradient(135deg, var(--danger), var(--danger-dark)); color: white; box-shadow: 0 4px 15px rgba(239,68,68,0.3); }
        .btn-danger:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(239,68,68,0.4); }
        .btn-warning { background: linear-gradient(135deg, var(--warning), #D97706); color: white; box-shadow: 0 4px 15px rgba(245,158,11,0.3); }
        .btn-warning:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(245,158,11,0.4); }
        
        .server-status { background: white; border-radius: 16px; padding: 30px; box-shadow: var(--shadow); }
        .status-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .status-indicator { display: flex; align-items: center; gap: 8px; background: rgba(16,185,129,0.1); color: #10B981; padding: 8px 16px; border-radius: 20px; font-weight: 600; }
        .status-dot { width: 10px; height: 10px; background: #10B981; border-radius: 50%; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }
        .status-grid { display: grid; grid-template-columns: repeat(2,1fr); gap: 20px; }
        .status-item { background: var(--light); border-radius: 12px; padding: 20px; }
        .status-value { font-size: 28px; font-weight: 700; }
        .progress-bar { height: 8px; background: var(--light-gray); border-radius: 4px; margin-top: 10px; overflow: hidden; }
        .progress-fill { height: 100%; border-radius: 4px; transition: width 0.5s; }
        .cpu-progress { background: linear-gradient(90deg, var(--primary), #60A5FA); }
        .ram-progress { background: linear-gradient(90deg, var(--secondary), #34D399); }
        .uptime-item { grid-column: span 2; text-align: center; background: linear-gradient(135deg,#f0f9ff,#e0f2fe); border: 1px solid #bae6fd; }
        @media (max-width: 480px) { .status-grid, .uptime-item { grid-template-columns: 1fr; grid-column: span 1; } }
        
        .badges { display: flex; justify-content: center; flex-wrap: wrap; gap: 30px; margin: 40px 0; padding: 25px; background: white; border-radius: 16px; box-shadow: var(--shadow); }
        .badge { display: flex; align-items: center; gap: 10px; font-weight: 600; }
        .badge i { color: var(--primary); }
        
        .section-title { text-align: center; margin-bottom: 40px; }
        .section-title h2 { font-size: 32px; font-weight: 700; margin-bottom: 10px; }
        .section-title p { color: var(--gray); font-size: 18px; max-width: 600px; margin: 0 auto; }
        .products { margin: 60px 0; }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; margin-top: 30px; }
        .product-card { background: white; border-radius: 16px; overflow: hidden; box-shadow: var(--shadow); border: 1px solid var(--light-gray); transition: transform 0.3s, box-shadow 0.3s; position: relative; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 15px 30px rgba(0,0,0,0.12); }
        .product-card.popular { border: 2px solid var(--warning); position: relative; }
        .popular-badge { position: absolute; top: 15px; right: -30px; background: var(--warning); color: white; padding: 5px 35px; font-size: 12px; font-weight: 600; transform: rotate(45deg); }
        .product-header { padding: 25px; text-align: center; background: linear-gradient(135deg,#f0f9ff,#e0f2fe); border-bottom: 1px solid var(--light-gray); }
        .product-title { font-size: 24px; font-weight: 700; margin-bottom: 5px; }
        .product-subtitle { color: var(--gray); font-size: 14px; }
        .product-features { padding: 25px; }
        .feature-list { list-style: none; }
        .feature-list li { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--light); }
        .feature-list li:last-child { border-bottom: none; }
        .feature-name { color: var(--gray); }
        .feature-value { font-weight: 600; }
        .product-price { padding: 20px 25px; background: var(--light); text-align: center; border-top: 1px solid var(--light-gray); }
        .price { font-size: 32px; font-weight: 800; color: var(--primary); margin-bottom: 5px; }
        .price-period { color: var(--gray); font-size: 14px; }
        .btn-buy { width: 100%; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; border: none; padding: 16px; border-radius: 10px; font-weight: 600; font-size: 16px; cursor: pointer; margin-top: 15px; transition: all 0.3s; }
        .btn-buy:hover { opacity: 0.9; transform: translateY(-2px); }
        
        /* EFEK KLIK PRODUK - GLOW BIRU */
        .product-card.click-glow {
            animation: clickGlow 0.6s ease-out;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1), 0 0 25px rgba(59, 130, 246, 0.5);
        }
        
        @keyframes clickGlow {
            0% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7); transform: scale(1); }
            50% { transform: scale(1.02); }
            70% { box-shadow: 0 0 0 15px rgba(59, 130, 246, 0); }
            100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0); transform: scale(1); }
        }
        
        /* EFEK BATAL - KEDIP MERAH */
        .product-card.cancel-effect {
            animation: cancelPulse 0.8s ease-out;
            border-color: var(--danger);
            box-shadow: 0 0 0 2px rgba(239, 68, 68, 0.2), 0 0 20px rgba(239, 68, 68, 0.3);
        }
        
        @keyframes cancelPulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            30% { transform: translateX(-5px); }
            40% { transform: translateX(5px); }
            50% { transform: translateX(-5px); }
            60% { transform: translateX(5px); }
            70% { transform: translateX(0); }
            100% { box-shadow: 0 0 0 15px rgba(239, 68, 68, 0); }
        }
        
        /* EFEK BATAL ICON */
        .cancel-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: var(--danger);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            z-index: 10;
            opacity: 0;
        }
        
        .cancel-icon.show {
            animation: cancelIconShow 0.8s ease-out;
        }
        
        @keyframes cancelIconShow {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
        }
        
        .service-info { margin: 60px 0; padding: 40px; background: white; border-radius: 16px; box-shadow: var(--shadow); }
        .service-info h2 { text-align: center; font-size: 32px; margin-bottom: 40px; }
        .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .info-card { background: var(--light); border-radius: 12px; padding: 25px; border-left: 4px solid var(--primary); }
        .info-card h3 { margin-bottom: 15px; font-size: 20px; }
        .info-list { list-style: none; }
        .info-list li { padding: 8px 0; color: var(--gray); position: relative; padding-left: 20px; }
        .info-list li:before { content: "‚Ä¢"; color: var(--primary); font-weight: bold; position: absolute; left: 0; }
        
        .testimonials { margin: 60px 0; }
        .testimonials h2 { text-align: center; font-size: 32px; margin-bottom: 10px; }
        .rating { text-align: center; margin-bottom: 30px; }
        .stars { color: #F59E0B; font-size: 24px; margin-bottom: 5px; }
        .rating-text { color: var(--gray); font-size: 18px; }
        .testimonial-slider { position: relative; overflow: hidden; border-radius: 16px; background: white; padding: 40px 20px; box-shadow: var(--shadow); }
        .testimonial-track { display: flex; transition: transform 0.5s ease; cursor: grab; }
        .testimonial-track:active { cursor: grabbing; }
        .testimonial-slide { min-width: 100%; padding: 0 20px; user-select: none; }
        .testimonial-card { background: #FEF3C7; border-radius: 12px; padding: 25px; border: 1px solid #FDE68A; }
        .testimonial-header { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .avatar { width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 18px; }
        .customer-info h4 { font-size: 18px; margin-bottom: 5px; }
        .customer-stars { color: #F59E0B; }
        .testimonial-text { color: var(--dark); font-style: italic; line-height: 1.6; }
        .slider-controls { display: flex; justify-content: center; gap: 10px; margin-top: 20px; }
        .slider-dot { width: 12px; height: 12px; border-radius: 50%; background: var(--light-gray); cursor: pointer; transition: background 0.3s, transform 0.3s; }
        .slider-dot.active { background: var(--primary); transform: scale(1.2); }
        .slider-dot:hover { transform: scale(1.1); }
        
        footer { text-align: center; margin-top: 50px; padding: 30px; color: var(--gray); border-top: 1px solid var(--light-gray); background: white; }
        .footer-links { display: flex; justify-content: center; gap: 30px; margin-bottom: 20px; flex-wrap: wrap; }
        .footer-links a { color: var(--gray); text-decoration: none; display: flex; align-items: center; gap: 8px; }
        .footer-links a:hover { color: var(--primary); }
        
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center; padding: 20px; }
        .modal-overlay.active { display: flex; }
        .modal { background: white; border-radius: 16px; width: 100%; max-width: 500px; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 40px rgba(0,0,0,0.2); animation: modalSlide 0.3s ease; }
        @keyframes modalSlide { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        .modal-header { padding: 25px; border-bottom: 1px solid var(--light-gray); display: flex; justify-content: space-between; align-items: center; }
        .modal-header h3 { font-size: 24px; }
        .close-modal { background: none; border: none; font-size: 24px; color: var(--gray); cursor: pointer; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .close-modal:hover { background: var(--light); }
        .modal-body { padding: 25px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 500; }
        .form-control { width: 100%; padding: 12px 16px; border: 1px solid var(--light-gray); border-radius: 8px; font-size: 16px; }
        .form-control:focus { outline: none; border-color: var(--primary); }
        .form-note { font-size: 14px; color: var(--gray); margin-top: 5px; }
        .modal-step { display: none; }
        .modal-step.active { display: block; }
        .button-group { display: flex; gap: 15px; margin-top: 25px; }
        .btn-cancel { background: #FEE2E2; color: #DC2626; border: 1px solid #FCA5A5; }
        .btn-cancel:hover { background: #FECACA; }
        
        /* MODAL BATAL TRANSAKSI */
        .cancel-confirm-modal { text-align: center; }
        .cancel-icon-large { font-size: 48px; color: var(--danger); margin-bottom: 20px; }
        
        /* MODAL DEVELOPER WARNING */
        .dev-warning-modal { text-align: center; }
        .warning-icon { font-size: 64px; color: var(--warning); margin-bottom: 20px; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .warning-text { background: #FEF3C7; padding: 15px; border-radius: 10px; margin: 20px 0; border: 2px solid #FDE68A; }
        
        .payment-instructions { display: none; background: #f0f9ff; padding: 20px; border-radius: 10px; margin: 20px 0; border: 2px dashed var(--primary); }
        .verify-btn { margin-top: 20px; text-align: center; }
        
        .loading { display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid var(--primary); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .qr-container { text-align: center; margin: 20px 0; }
        .qr-code { width: 200px; height: 200px; margin: 0 auto; background: #f3f4f6; border-radius: 10px; display: flex; align-items: center; justify-content: center; }
        
        /* ORDER DETAILS STYLE */
        .order-details { background: #f8fafc; padding: 20px; border-radius: 10px; margin: 20px 0; border: 1px solid var(--light-gray); }
        .order-row { display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid var(--light-gray); }
        .order-row:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .order-label { color: var(--gray); }
        .order-value { font-weight: 600; }
        
        /* BATAL STATUS */
        .cancelled-status { 
            background: #FEE2E2; 
            color: var(--danger); 
            padding: 10px 15px; 
            border-radius: 8px; 
            text-align: center;
            border: 1px solid #FCA5A5;
            margin: 15px 0;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @media (max-width: 768px) { 
            .container { padding: 15px; } 
            .hero-content h1 { font-size: 28px; } 
            .section-title h2 { font-size: 28px; } 
            .products-grid { grid-template-columns: 1fr; } 
            .info-grid { grid-template-columns: 1fr; } 
            .badges { flex-direction: column; align-items: center; gap: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">ZX</div>
                <div class="logo-text">
                    <h1><span>Asakura</span> Store</h1>
                    <div class="tagline">Sistem Otomatis 100%</div>
                </div>
            </div>
            <div class="menu-dots">
                <button class="dots-btn" id="menuBtn">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
                <div class="dropdown-menu" id="dropdownMenu">
                    <a href="https://t.me/brockstoreidd" target="_blank" class="dropdown-item" id="ownerLink">
                        <i class="fab fa-telegram"></i>
                        <span>Owner</span>
                    </a>
                    <a href="https://t.me/murbanfreebybrockstore" target="_blank" class="dropdown-item" id="updateLink">
                        <i class="fas fa-bullhorn"></i>
                        <span>Update</span>
                    </a>
                </div>
            </div>
        </header>

        <section class="hero">
            <div class="hero-content">
                <h2>Hosting Bot WhatsApp & Telegram</h2>
                <h1>Nikmati performa server <span>anti-lag</span> dengan aktivasi otomatis</h1>
                <p class="hero-description">
                    Dukungan teknis 24/7 siap membantu Anda kapan saja. Server hosting khusus bot dengan optimasi maksimal untuk performa terbaik.
                </p>
                <div class="btn-group">
                    <button class="btn btn-primary" id="lihatPaketBtn">
                        <i class="fas fa-eye"></i> Lihat Paket
                    </button>
                    <button class="btn btn-secondary" id="renewServerBtn">
                        <i class="fas fa-sync-alt"></i> Renew Server
                    </button>
                </div>
            </div>
            
            <div class="server-status">
                <div class="status-header">
                    <div class="status-title">
                        <h3>Server Status</h3>
                        <p>Real-time monitoring</p>
                    </div>
                    <div class="status-indicator">
                        <div class="status-dot"></div>
                        <span>Online</span>
                    </div>
                </div>
                
                <div class="status-grid">
                    <div class="status-item">
                        <h4><i class="fas fa-microchip"></i> CPU Usage</h4>
                        <div class="status-value" id="cpuValue">20%</div>
                        <div class="progress-bar">
                            <div class="progress-fill cpu-progress" id="cpuProgress"></div>
                        </div>
                        <div class="status-label">Low usage</div>
                    </div>
                    
                    <div class="status-item">
                        <h4><i class="fas fa-memory"></i> RAM Available</h4>
                        <div class="status-value" id="ramValue">6.6 GB / 8 GB</div>
                        <div class="progress-bar">
                            <div class="progress-fill ram-progress" id="ramProgress"></div>
                        </div>
                        <div class="status-label">20% used</div>
                    </div>
                    
                    <div class="status-item uptime-item">
                        <h4><i class="fas fa-chart-line"></i> Uptime</h4>
                        <div class="uptime-value" id="uptimeValue">99.80%</div>
                        <div class="status-label">Server availability</div>
                    </div>
                </div>
            </div>
        </section>

        <div class="badges">
            <div class="badge">
                <i class="fas fa-bolt"></i>
                <span>INSTANT SETUP</span>
            </div>
            <div class="badge">
                <i class="fas fa-shield-alt"></i>
                <span>GARANSI 30 HARI</span>
            </div>
            <div class="badge">
                <i class="fas fa-tachometer-alt"></i>
                <span>ANTI LAG</span>
            </div>
            <div class="badge">
                <i class="fas fa-headset"></i>
                <span>24/7 SUPPORT</span>
            </div>
        </div>

        <section class="products" id="productsSection">
            <div class="section-title">
                <h2>Layanan Panel & Server</h2>
                <p>Kualitas Terbaik dengan Harga Terjangkau</p>
            </div>
            
            <div class="products-grid" id="productsGrid"></div>
        </section>

        <section class="service-info">
            <h2>Informasi Layanan</h2>
            <div class="info-grid">
                <div class="info-card">
                    <h3>Cara Claim Garansi</h3>
                    <ul class="info-list">
                        <li>Wajib rekam video saat pertama kali login ke panel.</li>
                        <li>Jangan mengubah password root/utama sebelum dicek.</li>
                        <li>Garansi hanya jika melakukan pelanggaran (Mining/DDoS).</li>
                        <li>Hubungi admin via WhatsApp dengan menyertakan bukti.</li>
                        <li>Proses claim maksimal 1x24 jam kerja.</li>
                    </ul>
                </div>
                
                <div class="info-card">
                    <h3>Syarat & Ketentuan</h3>
                    <ul class="info-list">
                        <li>Dilarang keras menggunakan server untuk Mining Crypto.</li>
                        <li>Dilarang melakukan serangan DDoS Attack (Outbound).</li>
                        <li>Dilarang untuk hosting konten ilegal/phishing.</li>
                        <li>Penggunaan CPU berlebih (100% terus menerus) akan disuspend.</li>
                        <li>Backup data adalah tanggung jawab pengguna.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="testimonials">
            <h2>Apa Kata Mereka?</h2>
            <div class="rating">
                <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                </div>
                <div class="rating-text">‚≠ê 4.8 / 5.0 Rating Toko</div>
            </div>
            
            <div class="testimonial-slider">
                <div class="testimonial-track" id="testimonialTrack"></div>
                <div class="slider-controls" id="sliderDots"></div>
            </div>
        </section>

        <footer>
            <div class="footer-links">
                <a href="#" id="footerWhatsApp">
                    <i class="fab fa-whatsapp"></i> WhatsApp Support
                </a>
                <a href="https://t.me/murbanfreebybrockstore" target="_blank">
                    <i class="fab fa-telegram"></i> Telegram Channel
                </a>
                <a href="mailto:admin@asakura.my.id">
                    <i class="fas fa-envelope"></i> Email
                </a>
            </div>
            <p>¬© 2023 Asakura Store. All rights reserved.</p>
        </footer>
    </div>

    <!-- Order Modal -->
    <div class="modal-overlay" id="orderModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Data Pesanan Baru</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="modal-step active" id="step1">
                    <div style="margin-bottom: 20px;">
                        <h4 id="orderProduct">Panel 1 GB</h4>
                        <div class="price" id="orderPrice">Rp5.000</div>
                    </div>
                    
                    <div class="form-group">
                        <label>Nama Server / Hostname</label>
                        <input type="text" class="form-control" id="serverName" placeholder="Contoh: myserver01" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Email Anda (Wajib)</label>
                        <input type="email" class="form-control" id="customerEmail" placeholder="email@domain.com" required>
                        <div class="form-note">Akses server akan dikirim ke email ini</div>
                    </div>
                    
                    <div class="form-group">
                        <label>Nomor WhatsApp (Wajib)</label>
                        <input type="text" class="form-control" id="customerWhatsapp" placeholder="6281234567890" required>
                        <div class="form-note">Contoh: 6281234567890 (tanpa +, spasi, atau -)</div>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-cancel" id="cancelOrderBtn">Batal</button>
                        <button class="btn btn-primary" id="nextToPaymentBtn">Lanjutkan Ke Pembayaran ‚Üí</button>
                    </div>
                </div>
                
                <div class="modal-step" id="step2">
                    <h3 style="text-align: center;">Pembayaran QRIS</h3>
                    <p style="text-align: center; color: var(--gray); margin-bottom: 20px;">
                        Scan QR Code di bawah menggunakan aplikasi bank/e-wallet Anda
                    </p>
                    
                    <div class="qr-container">
                        <div class="qr-code">
                            <div>
                                <i class="fas fa-qrcode" style="font-size: 48px; color: var(--gray);"></i>
                                <div style="margin-top: 10px; font-size: 14px;">QR Code Pembayaran</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Konfirmasi Batal Modal (akan ditampilkan di atas step2) -->
                    <div class="cancel-confirm-modal" id="cancelConfirmModal" style="display: none;">
                        <div class="cancel-icon-large">
                            <i class="fas fa-times-circle"></i>
                        </div>
                        <h3>Batalkan Transaksi?</h3>
                        <p style="color: var(--gray); margin-bottom: 25px;">
                            Anda yakin ingin membatalkan transaksi ini?<br>
                            Data akan dihapus.
                        </p>
                        
                        <div class="order-details">
                            <div class="order-row">
                                <span class="order-label">Specs / Durasi:</span>
                                <span class="order-value" id="cancelSpecs">RAM 1GB, CPU 50%, Disk 10GB</span>
                            </div>
                            <div class="order-row">
                                <span class="order-label">Server Name:</span>
                                <span class="order-value" id="cancelServerName">brock</span>
                            </div>
                            <div class="order-row">
                                <span class="order-label">Email:</span>
                                <span class="order-value" id="cancelEmail">nuradiganteng5@gmail.com</span>
                            </div>
                        </div>
                        
                        <div class="button-group" style="justify-content: center; margin-top: 30px;">
                            <button class="btn btn-danger" id="confirmCancelBtn">
                                <i class="fas fa-ban"></i> Ya, Batalkan!
                            </button>
                            <button class="btn btn-primary" id="continuePaymentBtn">
                                <i class="fas fa-credit-card"></i> Tidak, Lanjut Bayar
                            </button>
                        </div>
                    </div>
                    
                    <div class="payment-instructions" id="paymentInstructions">
                        <div style="margin-top: 15px; padding: 15px; background: white; border-radius: 8px; border: 1px solid var(--light-gray);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>Order ID:</span>
                                <span style="font-weight: 600;" id="orderIdDisplay">ZX123456</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>Total:</span>
                                <span style="font-weight: 600; color: var(--primary);" id="totalAmount">Rp5.000</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>Status:</span>
                                <span id="paymentStatus" style="font-weight: 600; color: #F59E0B;">MENUNGGU</span>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 20px; font-size: 14px; color: var(--gray);">
                            <i class="fas fa-clock"></i> Selesaikan dalam: <span id="paymentTimer" style="font-weight: 600;">15:00</span>
                        </div>
                        
                        <div class="button-group" style="justify-content: center; margin-top: 25px;">
                            <button class="btn btn-danger" id="batalkanTransaksiBtn">
                                <i class="fas fa-ban"></i> Batalkan Transaksi
                            </button>
                            <button class="btn btn-primary" id="verifyPaymentBtn">
                                <i class="fas fa-check-circle"></i> Verifikasi Pembayaran
                            </button>
                        </div>
                    </div>
                    
                    <!-- Status Dibatalkan -->
                    <div class="cancelled-status" id="cancelledStatus" style="display: none;">
                        <h4 style="margin-bottom: 5px;"><i class="fas fa-times-circle"></i> Dibatalkan!</h4>
                        <p>Transaksi telah dibatalkan.</p>
                        <button class="btn btn-primary" id="backToProductsBtn" style="margin-top: 10px;">
                            <i class="fas fa-shopping-cart"></i> Kembali ke Produk
                        </button>
                    </div>
                </div>
                
                <div class="modal-step" id="step3">
                    <div style="text-align: center; padding: 30px 0;">
                        <div style="font-size: 48px; color: #10B981; margin-bottom: 20px;">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h3 style="margin-bottom: 10px;">Pembayaran Berhasil!</h3>
                        <p style="color: var(--gray); margin-bottom: 15px;">
                            Akun Anda telah berhasil dibuat:
                        </p>
                        <div id="successDetails" style="background: #f0f9ff; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: left; border: 1px solid var(--light-gray);"></div>
                        <div style="background: #FEF3C7; padding: 15px; border-radius: 8px; margin: 20px 0; text-align: left; border: 1px solid #FDE68A;">
                            <p style="margin-bottom: 10px;"><strong>‚ö†Ô∏è PERHATIAN:</strong></p>
                            <p style="font-size: 14px; margin-bottom: 5px;">1. Simpan baik-baik data akun diatas</p>
                            <p style="font-size: 14px; margin-bottom: 5px;">2. Jangan bagikan ke siapapun</p>
                            <p style="font-size: 14px;">3. Hubungi admin jika ada kendala</p>
                        </div>
                        <button class="btn btn-primary" id="closeSuccessBtn">Tutup</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Renew Server Modal -->
    <div class="modal-overlay" id="renewModal">
        <div class="modal">
            <div class="modal-header">
                <h3><i class="fas fa-sync-alt"></i> Perpanjang Server</h3>
                <button class="close-modal" id="closeRenewModal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Step 1: Input Data Renew -->
                <div class="modal-step active" id="renewStep1">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <h4 style="color: var(--primary);">Solusi Hosting #1</h4>
                        <p style="color: var(--gray); font-size: 14px; margin-top: 5px;">
                            Masukkan data yang sama saat pembelian awal
                        </p>
                    </div>
                    
                    <div style="background: #FEF3C7; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #FDE68A;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <i class="fas fa-exclamation-triangle" style="color: var(--warning);"></i>
                            <strong>‚ö†Ô∏è Penting!</strong>
                        </div>
                        <p style="font-size: 14px; margin-bottom: 0;">
                            Pastikan data yang dimasukkan sesuai dengan pembelian awal untuk proses perpanjangan yang lancar.
                        </p>
                    </div>
                    
                    <div class="form-group">
                        <label>Email Terdaftar</label>
                        <input type="email" class="form-control" id="renewEmail" placeholder="email@domain.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Nama Server / ID Panel</label>
                        <input type="text" class="form-control" id="renewServerName" placeholder="Contoh: myserver01" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Pilih Paket</label>
                        <select class="form-control" id="renewPackage">
                            <option value="panel1">Panel Hemat 1GB</option>
                            <option value="panel2">Panel Hemat 2GB</option>
                            <option value="panel3">Panel Hemat 3GB</option>
                            <option value="panel4">Panel Hemat 4GB</option>
                            <option value="unlimited1">Unlimited 1 Bulan</option>
                            <option value="unlimited2">Unlimited 2 Bulan</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Durasi Perpanjangan</label>
                        <select class="form-control" id="renewDuration">
                            <option value="1">1 Bulan</option>
                            <option value="2">2 Bulan</option>
                            <option value="3">3 Bulan</option>
                            <option value="6">6 Bulan</option>
                        </select>
                    </div>
                    
                    <div style="background: #f0f9ff; padding: 20px; border-radius: 10px; margin: 25px 0; text-align: center; border: 2px dashed var(--primary);">
                        <div style="font-size: 14px; color: var(--gray); margin-bottom: 5px;">Total Perpanjangan</div>
                        <div class="price" id="renewTotalPrice">Rp5.000</div>
                        <div style="font-size: 12px; color: var(--gray); margin-top: 5px;">*Harga sudah termasuk PPN</div>
                    </div>
                    
                    <div class="button-group">
                        <button class="btn btn-cancel" id="cancelRenewBtn">Batal</button>
                        <button class="btn btn-primary" id="nextRenewBtn">Bayar Perpanjangan ‚Üí</button>
                    </div>
                </div>
                
                <!-- Step 2: Developer Warning -->
                <div class="modal-step" id="renewStep2">
                    <div class="dev-warning-modal">
                        <div class="warning-icon">
                            <i class="fas fa-tools"></i>
                        </div>
                        
                        <div class="warning-text">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px; justify-content: center;">
                                <i class="fas fa-exclamation-triangle" style="color: var(--warning); font-size: 20px;"></i>
                                <h3 style="margin: 0; color: var(--warning);">Dalam Tahap Pengembangan!</h3>
                            </div>
                            <p style="margin-bottom: 15px; color: var(--dark);">
                                Fitur perpanjangan otomatis sedang dalam pengembangan. Untuk saat ini, silahkan hubungi Admin untuk proses perpanjangan server.
                            </p>
                            <div style="background: #FFFBEB; padding: 12px; border-radius: 8px; margin-top: 15px; border: 1px solid #FDE68A;">
                                <p style="margin: 0; font-size: 14px; color: var(--dark);">
                                    <strong>üìû Hubungi Admin:</strong><br>
                                    WhatsApp: <span id="adminWhatsappNumber">+62 812-3456-7890</span><br>
                                    Telegram: <a href="https://t.me/brockstoreidd" target="_blank" style="color: var(--primary);">@brockstoreidd</a>
                                </p>
                            </div>
                        </div>
                        
                        <div style="background: #f8fafc; padding: 15px; border-radius: 10px; margin: 25px 0; border: 1px solid var(--light-gray);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Paket:</span>
                                <span style="font-weight: 600;" id="reviewPackage">Panel Hemat 1GB</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Durasi:</span>
                                <span style="font-weight: 600;" id="reviewDuration">1 Bulan</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>Server:</span>
                                <span style="font-weight: 600;" id="reviewServer">brock</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding-top: 10px; border-top: 1px solid var(--light-gray);">
                                <span>Total:</span>
                                <span style="font-weight: 800; color: var(--primary);" id="reviewTotal">Rp5.000</span>
                            </div>
                        </div>
                        
                        <div class="button-group" style="justify-content: center;">
                            <button class="btn btn-warning" id="contactAdminBtn">
                                <i class="fab fa-whatsapp"></i> Hubungi Admin via WhatsApp
                            </button>
                            <button class="btn btn-primary" id="backToRenewBtn">
                                <i class="fas fa-arrow-left"></i> Kembali
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== DATA PRODUK =====
        const products = [
            { name: 'Panel 1 GB', price: 'Rp5.000', popular: false, specs: { uptime: '99%', cpu: '40% 2 Core', disk: '1024 GiB', bandwidth: '2TB', antiDDoS: '‚úÖ' } },
            { name: 'Panel 2 GB', price: 'Rp12.000', popular: false, specs: { uptime: '99%', cpu: '70% 2 Core', disk: '2048 GiB', bandwidth: '2TB', antiDDoS: '‚úÖ' } },
            { name: 'Panel 3 GB', price: 'Rp19.800', popular: false, specs: { uptime: '99%', cpu: '100% 2 Core', disk: '3072 GiB', bandwidth: '2TB', antiDDoS: '‚úÖ' } },
            { name: 'Panel 4 GB', price: 'Rp24.500', popular: true, specs: { uptime: '99%', cpu: '120% 2 Core', disk: '4114 GiB', bandwidth: '2TB', antiDDoS: '‚úÖ' } },
            { name: 'Unlimited 1 Bulan', price: 'Rp30.000', popular: false, specs: { uptime: '99%', cpu: '0% 2 Core', disk: '0 GiB', bandwidth: '2TB', antiDDoS: '‚úÖ' } },
            { name: 'Unlimited 2 Bulan', price: 'Rp42.000', popular: false, specs: { uptime: '99%', cpu: '0% 2 Core', disk: '0 GiB', bandwidth: '2TB', antiDDoS: '‚úÖ' } },
            { name: 'Unlimited 3 Bulan', price: 'Rp50.000', popular: false, specs: { uptime: '99%', cpu: '0% 2 Core', disk: '0 GiB', bandwidth: '2TB', antiDDoS: '‚úÖ' } },
            { name: 'Unlimited 4 Bulan', price: 'Rp62.000', popular: false, specs: { uptime: '99%', cpu: '0% 2 Core', disk: '0 GiB', bandwidth: '2TB', antiDDoS: '‚úÖ' } }
        ];

        const testimonials = [
            { name: 'Agus Pratama', initials: 'AP', text: 'Servernya kenceng parah, setup instan ga pake lama. Admin juga fast respon banget pas ada kendala. Recommended!' },
            { name: 'Citra Dewi', initials: 'CD', text: 'Anti DDoS nya beneran work. Sempet kena serangan tapi server tetap up. Terimakasih layannanya.' },
            { name: 'Denki Kurniawan', initials: 'DK', text: 'Udah langganan 3 bulan disini ga pernah kecewa. Sukses terus buat ichanStore.' },
            { name: 'Budi Santoso', initials: 'BS', text: 'Harga murah tapi kualitas ga murahan. Panel lancar jaya buat hosting bot Discord saya. Mantap!' }
        ];

        // ===== VARIABLES =====
        let currentProduct = null;
        let currentOrder = null;
        let paymentInterval = null;
        let timeLeft = 15 * 60;
        let sliderInterval = null;
        let isDragging = false;
        let startPos = 0;
        let currentTranslate = 0;
        let prevTranslate = 0;
        let currentIndex = 0;
        let lastClickedProduct = null;

        // ===== INITIALIZE =====
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            loadTestimonials();
            setupEventListeners();
            startMonitoring();
            setupSliderDrag();
            
            // Update admin number from config
            if (typeof SYSTEM_CONFIG !== 'undefined' && SYSTEM_CONFIG.whatsapp) {
                document.getElementById('adminWhatsappNumber').textContent = SYSTEM_CONFIG.whatsapp.adminNumber;
            }
        });

        // ===== LOAD PRODUCTS =====
        function loadProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            
            products.forEach(product => {
                const card = document.createElement('div');
                card.className = `product-card ${product.popular ? 'popular' : ''}`;
                card.innerHTML = `
                    ${product.popular ? '<div class="popular-badge">POPULAR</div>' : ''}
                    <div class="cancel-icon" style="display: none;">
                        <i class="fas fa-ban"></i>
                    </div>
                    <div class="product-header">
                        <div class="product-title">${product.name}</div>
                        <div class="product-subtitle">${product.name.includes('Unlimited') ? 'Paket Unlimited' : 'Paket Premium'}</div>
                    </div>
                    <div class="product-features">
                        <ul class="feature-list">
                            <li><span class="feature-name">Uptime</span><span class="feature-value">${product.specs.uptime}</span></li>
                            <li><span class="feature-name">CPU</span><span class="feature-value">${product.specs.cpu}</span></li>
                            <li><span class="feature-name">Disk</span><span class="feature-value">${product.specs.disk}</span></li>
                            <li><span class="feature-name">BandWith</span><span class="feature-value">${product.specs.bandwidth}</span></li>
                            <li><span class="feature-name">Anti-DDoS</span><span class="feature-value">${product.specs.antiDDoS}</span></li>
                        </ul>
                    </div>
                    <div class="product-price">
                        <div class="price">${product.price}</div>
                        <div class="price-period">${product.name.includes('Unlimited') ? product.name.includes('2') ? '/2 bulan' : product.name.includes('3') ? '/3 bulan' : product.name.includes('4') ? '/4 bulan' : '/bulan' : '/bulan'}</div>
                        <button class="btn-buy" data-product="${product.name}">BELI SEKARANG</button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // ===== LOAD TESTIMONIALS (DENGAN DOT YANG BISA DIKLIK) =====
        function loadTestimonials() {
            const track = document.getElementById('testimonialTrack');
            const dots = document.getElementById('sliderDots');
            
            track.innerHTML = '';
            dots.innerHTML = '';
            
            testimonials.forEach((testimonial, index) => {
                const slide = document.createElement('div');
                slide.className = 'testimonial-slide';
                slide.innerHTML = `
                    <div class="testimonial-card">
                        <div class="testimonial-header">
                            <div class="avatar">${testimonial.initials}</div>
                            <div class="customer-info">
                                <h4>${testimonial.name}</h4>
                                <div class="customer-stars"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                            </div>
                        </div>
                        <p class="testimonial-text">"${testimonial.text}"</p>
                    </div>
                `;
                track.appendChild(slide);
                
                const dot = document.createElement('div');
                dot.className = `slider-dot ${index === 0 ? 'active' : ''}`;
                dot.dataset.index = index;
                dots.appendChild(dot);
                
                // Event listener untuk klik pada titik
                dot.addEventListener('click', (e) => {
                    e.stopPropagation();
                    goToSlide(index);
                    resetAutoSlide();
                });
            });
            
            // Auto slide setiap 5 detik
            startAutoSlide();
        }

        function goToSlide(index) {
            const track = document.getElementById('testimonialTrack');
            const dots = document.querySelectorAll('.slider-dot');
            
            currentIndex = index;
            track.style.transform = `translateX(-${index * 100}%)`;
            
            dots.forEach(dot => dot.classList.remove('active'));
            dots[index].classList.add('active');
        }

        function startAutoSlide() {
            if (sliderInterval) clearInterval(sliderInterval);
            
            sliderInterval = setInterval(() => {
                let nextIndex = currentIndex + 1;
                if (nextIndex >= testimonials.length) nextIndex = 0;
                goToSlide(nextIndex);
            }, 5000);
        }

        function resetAutoSlide() {
            startAutoSlide();
        }

        // ===== SETUP SLIDER DRAG (UNTUK GESER) =====
        function setupSliderDrag() {
            const track = document.getElementById('testimonialTrack');
            
            // Mouse events
            track.addEventListener('mousedown', dragStart);
            track.addEventListener('mouseup', dragEnd);
            track.addEventListener('mouseleave', dragEnd);
            track.addEventListener('mousemove', drag);
            
            // Touch events
            track.addEventListener('touchstart', dragStart);
            track.addEventListener('touchend', dragEnd);
            track.addEventListener('touchmove', drag);
            
            // Prevent image drag
            track.addEventListener('dragstart', (e) => {
                e.preventDefault();
            });
        }

        function dragStart(e) {
            if (e.type === 'touchstart') {
                startPos = e.touches[0].clientX;
            } else {
                startPos = e.clientX;
                e.preventDefault();
            }
            
            isDragging = true;
            
            // Reset auto slide saat mulai drag
            if (sliderInterval) {
                clearInterval(sliderInterval);
                sliderInterval = null;
            }
            
            const track = document.getElementById('testimonialTrack');
            const style = window.getComputedStyle(track);
            const matrix = new DOMMatrixReadOnly(style.transform);
            currentTranslate = matrix.m41;
            
            track.style.cursor = 'grabbing';
            track.style.transition = 'none';
        }

        function drag(e) {
            if (!isDragging) return;
            
            const currentPosition = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;
            const diff = currentPosition - startPos;
            
            const track = document.getElementById('testimonialTrack');
            track.style.transform = `translateX(${currentTranslate + diff}px)`;
        }

        function dragEnd(e) {
            if (!isDragging) return;
            
            isDragging = false;
            
            const track = document.getElementById('testimonialTrack');
            track.style.cursor = 'grab';
            track.style.transition = 'transform 0.5s ease';
            
            const currentPosition = e.type === 'touchend' ? e.changedTouches[0].clientX : e.clientX;
            const diff = currentPosition - startPos;
            
            // Jika drag cukup jauh, pindah slide
            if (Math.abs(diff) > 100) {
                if (diff > 0 && currentIndex > 0) {
                    // Drag ke kanan - previous slide
                    goToSlide(currentIndex - 1);
                } else if (diff < 0 && currentIndex < testimonials.length - 1) {
                    // Drag ke kiri - next slide
                    goToSlide(currentIndex + 1);
                } else {
                    // Kembali ke posisi semula
                    goToSlide(currentIndex);
                }
            } else {
                // Kembali ke posisi semula
                goToSlide(currentIndex);
            }
            
            // Restart auto slide setelah drag selesai
            setTimeout(() => {
                startAutoSlide();
            }, 3000);
        }

        // ===== SETUP EVENT LISTENERS =====
        function setupEventListeners() {
            // Menu dots
            document.getElementById('menuBtn').addEventListener('click', (e) => {
                e.stopPropagation();
                document.getElementById('dropdownMenu').classList.toggle('show');
            });
            document.addEventListener('click', () => {
                document.getElementById('dropdownMenu').classList.remove('show');
            });
            
            // Tombol Lihat Paket
            document.getElementById('lihatPaketBtn').addEventListener('click', () => {
                document.getElementById('productsSection').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Tombol Renew Server
            document.getElementById('renewServerBtn').addEventListener('click', () => {
                openRenewModal();
            });
            
            // Buy buttons dengan efek glow
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('btn-buy')) {
                    const productName = e.target.dataset.product;
                    const productCard = e.target.closest('.product-card');
                    
                    // Simpan produk yang terakhir diklik
                    lastClickedProduct = productCard;
                    
                    // Tambah efek glow ke kartu produk
                    productCard.classList.add('click-glow');
                    
                    // Hapus class glow setelah animasi selesai
                    setTimeout(() => {
                        productCard.classList.remove('click-glow');
                    }, 600);
                    
                    // Buka modal setelah efek glow
                    setTimeout(() => {
                        openOrderModal(productName);
                    }, 300);
                }
            });
            
            // Footer WhatsApp
            document.getElementById('footerWhatsApp').addEventListener('click', (e) => {
                e.preventDefault();
                const waNumber = typeof SYSTEM_CONFIG !== 'undefined' ? SYSTEM_CONFIG.whatsapp.adminNumber : '6281234567890';
                window.open(`https://wa.me/${waNumber}`, '_blank');
            });
            
            setupModalEvents();
            setupRenewModalEvents();
        }

        // ===== RENEW MODAL FUNCTIONS =====
        function openRenewModal() {
            // Reset form
            document.getElementById('renewEmail').value = '';
            document.getElementById('renewServerName').value = '';
            document.getElementById('renewPackage').value = 'panel1';
            document.getElementById('renewDuration').value = '1';
            updateRenewPrice();
            
            showRenewStep(1);
            document.getElementById('renewModal').classList.add('active');
        }

        function showRenewStep(step) {
            document.querySelectorAll('#renewModal .modal-step').forEach(s => s.classList.remove('active'));
            document.getElementById(`renewStep${step}`).classList.add('active');
            
            if (step === 2) {
                // Update review data
                document.getElementById('reviewPackage').textContent = 
                    document.getElementById('renewPackage').options[document.getElementById('renewPackage').selectedIndex].text;
                document.getElementById('reviewDuration').textContent = 
                    document.getElementById('renewDuration').options[document.getElementById('renewDuration').selectedIndex].text;
                document.getElementById('reviewServer').textContent = 
                    document.getElementById('renewServerName').value || 'brock';
                document.getElementById('reviewTotal').textContent = 
                    document.getElementById('renewTotalPrice').textContent;
            }
        }

        function updateRenewPrice() {
            const packageSelect = document.getElementById('renewPackage');
            const durationSelect = document.getElementById('renewDuration');
            const packagePriceMap = {
                'panel1': 5000,
                'panel2': 12000,
                'panel3': 19800,
                'panel4': 24500,
                'unlimited1': 30000,
                'unlimited2': 42000
            };
            
            const basePrice = packagePriceMap[packageSelect.value] || 5000;
            const duration = parseInt(durationSelect.value);
            const totalPrice = basePrice * duration;
            
            document.getElementById('renewTotalPrice').textContent = `Rp${totalPrice.toLocaleString('id-ID')}`;
        }

        function setupRenewModalEvents() {
            // Close renew modal
            document.getElementById('closeRenewModal').addEventListener('click', closeRenewModal);
            document.getElementById('cancelRenewBtn').addEventListener('click', closeRenewModal);
            
            // Price update listeners
            document.getElementById('renewPackage').addEventListener('change', updateRenewPrice);
            document.getElementById('renewDuration').addEventListener('change', updateRenewPrice);
            
            // Next to payment
            document.getElementById('nextRenewBtn').addEventListener('click', () => {
                const email = document.getElementById('renewEmail').value.trim();
                const serverName = document.getElementById('renewServerName').value.trim();
                
                if (!email || !serverName) {
                    alert('Harap lengkapi email dan nama server terlebih dahulu!');
                    return;
                }
                
                // Validasi email
                if (!validateEmail(email)) {
                    alert('Format email tidak valid!');
                    return;
                }
                
                showRenewStep(2);
            });
            
            // Back to renew form
            document.getElementById('backToRenewBtn').addEventListener('click', () => {
                showRenewStep(1);
            });
            
            // Contact admin button
            document.getElementById('contactAdminBtn').addEventListener('click', () => {
                const waNumber = typeof SYSTEM_CONFIG !== 'undefined' ? SYSTEM_CONFIG.whatsapp.adminNumber : '6281234567890';
                const message = encodeURIComponent(
                    `Halo Admin, saya ingin memperpanjang server saya.\n\n` +
                    `Detail Perpanjangan:\n` +
                    `Email: ${document.getElementById('renewEmail').value}\n` +
                    `Server: ${document.getElementById('renewServerName').value}\n` +
                    `Paket: ${document.getElementById('renewPackage').options[document.getElementById('renewPackage').selectedIndex].text}\n` +
                    `Durasi: ${document.getElementById('renewDuration').options[document.getElementById('renewDuration').selectedIndex].text}\n` +
                    `Total: ${document.getElementById('renewTotalPrice').textContent}`
                );
                
                window.open(`https://wa.me/${waNumber}?text=${message}`, '_blank');
            });
            
            // Close modal on overlay click
            document.getElementById('renewModal').addEventListener('click', (e) => {
                if (e.target === document.getElementById('renewModal')) {
                    closeRenewModal();
                }
            });
        }

        function closeRenewModal() {
            document.getElementById('renewModal').classList.remove('active');
        }

        // ===== ORDER MODAL =====
        function openOrderModal(productName) {
            currentProduct = products.find(p => p.name === productName);
            if (!currentProduct) return;
            
            document.getElementById('orderProduct').textContent = currentProduct.name;
            document.getElementById('orderPrice').textContent = currentProduct.price;
            document.getElementById('serverName').value = '';
            document.getElementById('customerEmail').value = '';
            document.getElementById('customerWhatsapp').value = '';
            
            showModalStep(1);
            document.getElementById('orderModal').classList.add('active');
        }

        function showModalStep(step) {
            document.querySelectorAll('#orderModal .modal-step').forEach(s => s.classList.remove('active'));
            document.getElementById(`step${step}`).classList.add('active');
            
            const titles = { 1: 'Data Pesanan Baru', 2: 'Pembayaran QRIS', 3: 'Sukses' };
            document.getElementById('modalTitle').textContent = titles[step] || '';
            
            if (step === 2) {
                startPaymentTimer();
                showPaymentInstructions();
            } else if (paymentInterval) {
                clearInterval(paymentInterval);
                paymentInterval = null;
            }
        }

        function showPaymentInstructions() {
            const instructions = document.getElementById('paymentInstructions');
            const cancelConfirm = document.getElementById('cancelConfirmModal');
            const cancelledStatus = document.getElementById('cancelledStatus');
            
            // Reset semua tampilan
            instructions.style.display = 'block';
            cancelConfirm.style.display = 'none';
            cancelledStatus.style.display = 'none';
            
            // Generate order ID
            const orderId = 'ZX' + Date.now().toString().slice(-8);
            document.getElementById('orderIdDisplay').textContent = orderId;
            document.getElementById('totalAmount').textContent = currentProduct.price;
            
            // Setup order
            setupOrder(orderId);
        }

        function setupOrder(orderId) {
            const email = document.getElementById('customerEmail').value;
            const whatsapp = document.getElementById('customerWhatsapp').value;
            const serverName = document.getElementById('serverName').value;
            
            if (!email || !whatsapp || !serverName) {
                return;
            }
            
            // Format WhatsApp number
            let formattedWhatsapp = whatsapp.toString().trim();
            if (formattedWhatsapp.startsWith('0')) {
                formattedWhatsapp = '62' + formattedWhatsapp.substring(1);
            }
            if (!formattedWhatsapp.startsWith('62')) {
                formattedWhatsapp = '62' + formattedWhatsapp;
            }
            
            // Create order object
            currentOrder = {
                orderId: orderId,
                product: currentProduct.name,
                price: currentProduct.price,
                email: email,
                whatsapp: formattedWhatsapp,
                serverName: serverName,
                paymentMethod: 'qris',
                status: 'pending',
                timestamp: new Date().toISOString()
            };
            
            // Save to localStorage
            localStorage.setItem('lastOrder', JSON.stringify(currentOrder));
        }

        // ===== FUNGSI BATAL TRANSAKSI =====
        function showCancelConfirmation() {
            const instructions = document.getElementById('paymentInstructions');
            const cancelConfirm = document.getElementById('cancelConfirmModal');
            
            // Isi data untuk konfirmasi batal
            document.getElementById('cancelSpecs').textContent = 
                currentProduct.name.includes('GB') ? 
                `RAM ${currentProduct.name.match(/\d+/)[0]}GB, CPU 50%, Disk 10GB` : 
                'RAM 1GB, CPU 50%, Disk 10GB';
            document.getElementById('cancelServerName').textContent = 
                document.getElementById('serverName').value || 'brock';
            document.getElementById('cancelEmail').textContent = 
                document.getElementById('customerEmail').value || 'nuradiganteng5@gmail.com';
            
            // Tampilkan konfirmasi batal, sembunyikan instruksi pembayaran
            instructions.style.display = 'none';
            cancelConfirm.style.display = 'block';
        }

        function cancelTransaction() {
            // Hentikan timer pembayaran
            if (paymentInterval) {
                clearInterval(paymentInterval);
                paymentInterval = null;
            }
            
            // Tampilkan status dibatalkan
            const cancelConfirm = document.getElementById('cancelConfirmModal');
            const cancelledStatus = document.getElementById('cancelledStatus');
            
            cancelConfirm.style.display = 'none';
            cancelledStatus.style.display = 'block';
            
            // Update status order
            if (currentOrder) {
                currentOrder.status = 'cancelled';
                currentOrder.cancelledAt = new Date().toISOString();
                localStorage.setItem(`order_${currentOrder.orderId}`, JSON.stringify(currentOrder));
            }
            
            // Tambah efek cancel pada produk yang diklik terakhir
            if (lastClickedProduct) {
                const cancelIcon = lastClickedProduct.querySelector('.cancel-icon');
                
                // Tampilkan efek batal pada produk
                lastClickedProduct.classList.add('cancel-effect');
                
                // Tampilkan icon cancel
                cancelIcon.style.display = 'flex';
                cancelIcon.classList.add('show');
                
                // Hapus efek setelah selesai
                setTimeout(() => {
                    lastClickedProduct.classList.remove('cancel-effect');
                }, 800);
                
                // Sembunyikan icon cancel setelah animasi
                setTimeout(() => {
                    cancelIcon.classList.remove('show');
                    cancelIcon.style.display = 'none';
                }, 800);
            }
            
            // Play cancel sound effect
            playCancelSound();
        }

        function continuePayment() {
            // Kembali ke tampilan pembayaran
            const instructions = document.getElementById('paymentInstructions');
            const cancelConfirm = document.getElementById('cancelConfirmModal');
            
            cancelConfirm.style.display = 'none';
            instructions.style.display = 'block';
            
            // Restart timer pembayaran
            startPaymentTimer();
        }

        // ===== PAYMENT VERIFICATION =====
        document.getElementById('verifyPaymentBtn').addEventListener('click', async function() {
            if (!currentOrder) {
                alert('Belum ada order yang diproses!');
                return;
            }
            
            const btn = this;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<div class="loading"></div> Mengecek...';
            btn.disabled = true;
            
            try {
                // Check if SYSTEM_CONFIG is loaded
                if (typeof SYSTEM_CONFIG === 'undefined') {
                    alert('System configuration not loaded! Using test mode.');
                    setTimeout(() => {
                        simulateSuccessPayment();
                        btn.innerHTML = originalText;
                        btn.disabled = false;
                    }, 2000);
                    return;
                }
                
                if (SYSTEM_CONFIG.settings.testMode) {
                    // Mode testing - auto success
                    setTimeout(() => {
                        simulateSuccessPayment();
                        btn.innerHTML = originalText;
                        btn.disabled = false;
                    }, 2000);
                } else {
                    // Real mode - check Digiflazz
                    const isPaid = await checkRealPayment();
                    
                    if (isPaid) {
                        simulateSuccessPayment();
                    } else {
                        alert('Pembayaran belum diterima. Coba beberapa saat lagi.');
                    }
                    
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }
            } catch (error) {
                console.error('Payment check error:', error);
                alert('Error checking payment. Coba lagi nanti.');
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        });

        async function checkRealPayment() {
            if (!SYSTEM_CONFIG.digiflazz.apiKey || SYSTEM_CONFIG.digiflazz.apiKey.includes('APIKEY')) {
                alert('API Key Digiflazz belum diatur! Gunakan mode testing.');
                return false;
            }
            
            try {
                const response = await fetch('https://api.digiflazz.com/v1/cek-transaksi', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: SYSTEM_CONFIG.digiflazz.username,
                        apiKey: SYSTEM_CONFIG.digiflazz.apiKey,
                        ref_id: currentOrder.orderId
                    })
                });
                
                const result = await response.json();
                
                if (result.data && result.data.status === 'Sukses') {
                    return true;
                }
                return false;
            } catch (error) {
                console.error('Payment check error:', error);
                throw error;
            }
        }

        function simulateSuccessPayment() {
            document.getElementById('paymentStatus').textContent = 'BERHASIL';
            document.getElementById('paymentStatus').style.color = '#10B981';
            
            // Create account
            createPanelAccount();
        }

        // ===== CREATE PANEL ACCOUNT =====
        async function createPanelAccount() {
            if (!currentOrder) return;
            
            try {
                // Generate username & password
                const username = SYSTEM_CONFIG.panel.usernamePrefix + Date.now().toString().slice(-8);
                const password = generatePassword(12);
                
                // Get package from mapping
                const packageId = SYSTEM_CONFIG.panel.packageMapping[currentOrder.product] || '1';
                
                if (SYSTEM_CONFIG.settings.autoCreateAccount && 
                    SYSTEM_CONFIG.panel.apiKey && 
                    SYSTEM_CONFIG.panel.apiToken &&
                    !SYSTEM_CONFIG.panel.apiKey.includes('API_KEY')) {
                    
                    // Real API call to panel
                    const accountData = {
                        username: username,
                        password: password,
                        email: currentOrder.email,
                        package: packageId,
                        domain: currentOrder.serverName + '.' + SYSTEM_CONFIG.panel.domain,
                        api_key: SYSTEM_CONFIG.panel.apiKey,
                        api_token: SYSTEM_CONFIG.panel.apiToken
                    };
                    
                    // Call panel API (adjust endpoint based on your panel)
                    const panelUrl = `https://panel.${SYSTEM_CONFIG.panel.domain}/api/create-account`;
                    
                    const response = await fetch(panelUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(accountData)
                    });
                    
                    const result = await response.json();
                    
                    if (result.success || result.status === 'success') {
                        currentOrder.username = username;
                        currentOrder.password = password;
                        currentOrder.panelResponse = result;
                        currentOrder.status = 'completed';
                        currentOrder.completedAt = new Date().toISOString();
                    } else {
                        throw new Error(result.message || 'Failed to create account');
                    }
                    
                } else {
                    // Simulation mode or manual
                    currentOrder.username = username;
                    currentOrder.password = password;
                    currentOrder.status = 'completed';
                    currentOrder.completedAt = new Date().toISOString();
                }
                
                // Show success details
                showSuccessDetails();
                playSuccessSound();
                
                // Save to localStorage
                localStorage.setItem(`order_${currentOrder.orderId}`, JSON.stringify(currentOrder));
                localStorage.setItem('lastOrder', JSON.stringify(currentOrder));
                
                // Show success step
                setTimeout(() => showModalStep(3), 1500);
                
            } catch (error) {
                console.error('Create account error:', error);
                
                // Fallback: show credentials anyway
                const username = SYSTEM_CONFIG.panel.usernamePrefix + Date.now().toString().slice(-8);
                const password = generatePassword(12);
                
                currentOrder.username = username;
                currentOrder.password = password;
                currentOrder.status = 'error';
                currentOrder.error = error.message;
                
                showSuccessDetails();
                setTimeout(() => showModalStep(3), 1500);
            }
        }

        function showSuccessDetails() {
            if (!currentOrder) return;
            
            const panelUrl = `https://panel.${SYSTEM_CONFIG.panel.domain}`;
            const successHtml = `
                <div style="margin-bottom: 10px;"><strong>Order ID:</strong> ${currentOrder.orderId}</div>
                <div style="margin-bottom: 10px;"><strong>Produk:</strong> ${currentOrder.product}</div>
                <div style="margin-bottom: 10px;"><strong>Email:</strong> ${currentOrder.email}</div>
                <div style="margin-bottom: 10px;"><strong>Username:</strong> ${currentOrder.username}</div>
                <div style="margin-bottom: 10px;"><strong>Password:</strong> ${currentOrder.password}</div>
                <div style="margin-bottom: 10px;"><strong>Panel URL:</strong> ${panelUrl}</div>
                <div style="margin-bottom: 10px;"><strong>Server IP:</strong> ${SYSTEM_CONFIG.panel.serverIp}</div>
                <div><strong>Port:</strong> ${SYSTEM_CONFIG.panel.port}</div>
                ${currentOrder.status === 'error' ? `<div style="margin-top: 10px; color: #DC2626;"><strong>Note:</strong> ${currentOrder.error}</div>` : ''}
            `;
            
            document.getElementById('successDetails').innerHTML = successHtml;
        }

        function generatePassword(length = 12) {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';
            let password = '';
            for (let i = 0; i < length; i++) {
                password += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return password;
        }

        // ===== PAYMENT TIMER =====
        function startPaymentTimer() {
            timeLeft = SYSTEM_CONFIG.settings.paymentTimeout * 60;
            updateTimerDisplay();
            
            if (paymentInterval) clearInterval(paymentInterval);
            
            paymentInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(paymentInterval);
                    alert('Waktu pembayaran habis!');
                    closeModal();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('paymentTimer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // ===== MODAL EVENTS =====
        function setupModalEvents() {
            // Close modal
            document.getElementById('closeModal').addEventListener('click', closeModal);
            document.getElementById('closeSuccessBtn').addEventListener('click', closeModal);
            document.getElementById('cancelOrderBtn').addEventListener('click', closeModal);
            
            // Next to payment
            document.getElementById('nextToPaymentBtn').addEventListener('click', () => {
                const email = document.getElementById('customerEmail').value.trim();
                const whatsapp = document.getElementById('customerWhatsapp').value.trim();
                const serverName = document.getElementById('serverName').value.trim();
                
                if (!email || !whatsapp || !serverName) {
                    alert('Harap lengkapi semua data terlebih dahulu!');
                    return;
                }
                
                // Validasi email
                if (!validateEmail(email)) {
                    alert('Format email tidak valid!');
                    return;
                }
                
                // Validasi WhatsApp
                if (!validateWhatsApp(whatsapp)) {
                    alert('Format WhatsApp tidak valid! Gunakan format: 6281234567890');
                    return;
                }
                
                showModalStep(2);
            });
            
            // Batalkan Transaksi Button
            document.getElementById('batalkanTransaksiBtn').addEventListener('click', () => {
                showCancelConfirmation();
            });
            
            // Confirm Cancel Button
            document.getElementById('confirmCancelBtn').addEventListener('click', () => {
                cancelTransaction();
            });
            
            // Continue Payment Button
            document.getElementById('continuePaymentBtn').addEventListener('click', () => {
                continuePayment();
            });
            
            // Back to Products Button
            document.getElementById('backToProductsBtn').addEventListener('click', () => {
                closeModal();
                document.getElementById('productsSection').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Close modal on overlay click
            document.getElementById('orderModal').addEventListener('click', (e) => {
                if (e.target === document.getElementById('orderModal')) {
                    closeModal();
                }
            });
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function validateWhatsApp(whatsapp) {
            const re = /^[0-9]{10,15}$/;
            return re.test(whatsapp.replace(/^62/, '').replace(/^0/, ''));
        }

        function closeModal() {
            document.getElementById('orderModal').classList.remove('active');
            if (paymentInterval) {
                clearInterval(paymentInterval);
                paymentInterval = null;
            }
        }

        // ===== MONITORING =====
        function startMonitoring() {
            // Set initial values
            document.getElementById('cpuValue').textContent = '20%';
            document.getElementById('cpuProgress').style.width = '20%';
            document.getElementById('ramValue').textContent = '6.6 GB / 8 GB';
            document.getElementById('ramProgress').style.width = '20%';
            document.getElementById('uptimeValue').textContent = '99.80%';
            
            // Update periodically
            setInterval(() => {
                const cpu = 20 + Math.floor(Math.random() * 5) - 2;
                const ram = 6.6 + (Math.random() * 0.4) - 0.2;
                const uptime = 99.8 + (Math.random() * 0.1) - 0.05;
                
                document.getElementById('cpuValue').textContent = `${cpu}%`;
                document.getElementById('cpuProgress').style.width = `${cpu}%`;
                document.getElementById('ramValue').textContent = `${ram.toFixed(1)} GB / 8 GB`;
                document.getElementById('ramProgress').style.width = `${(ram / 8 * 100).toFixed(1)}%`;
                document.getElementById('uptimeValue').textContent = `${uptime.toFixed(2)}%`;
            }, 5000);
        }

        // ===== SOUND EFFECT =====
        function playSuccessSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 800;
                oscillator.type = 'sine';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 1);
            } catch (e) {
                // Audio not supported
            }
        }

        function playCancelSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = 400;
                oscillator.type = 'sawtooth';
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                // Audio not supported
            }
        }

        // ===== ADMIN PANEL =====
        let clickCount = 0;
        let clickTimer;
        
        document.querySelector('.logo').addEventListener('click', () => {
            clickCount++;
            if (clickTimer) clearTimeout(clickTimer);
            clickTimer = setTimeout(() => {
                if (clickCount >= 5) {
                    showAdminPanel();
                }
                clickCount = 0;
            }, 1000);
        });

        function showAdminPanel() {
            const configStr = JSON.stringify(SYSTEM_CONFIG, null, 2);
            const newConfig = prompt('ADMIN CONFIG PANEL\n\nEdit config JSON:\n(Backup dulu sebelum edit!)', configStr);
            
            if (newConfig) {
                try {
                    const parsed = JSON.parse(newConfig);
                    Object.assign(SYSTEM_CONFIG, parsed);
                    alert('Config updated! Refresh halaman untuk apply.');
                } catch (e) {
                    alert('Invalid JSON format!');
                }
            }
        }

        // ===== KEYBOARD SHORTCUTS =====
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && document.getElementById('orderModal').classList.contains('active')) {
                closeModal();
            }
            if (e.key === 'Escape' && document.getElementById('renewModal').classList.contains('active')) {
                closeRenewModal();
            }
            if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                e.preventDefault();
                showAdminPanel();
            }
        });

        console.log('Asakura Auto System Loaded!');
    </script>
</body>
  </html>
